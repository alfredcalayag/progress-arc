(function(){"use strict";angular.module("progressArcApp",["ngAnimate","ngAria","ngCookies","ngResource","ngRoute","ngSanitize"]).config(["$routeProvider",function(a){return a.when("/demo",{templateUrl:"views/demo.html",controller:"DemoCtrl",controllerAs:"vm"}).when("/demo-input",{templateUrl:"views/demo-input.html",controller:"DemoInputCtrl",controllerAs:"vm"}).when("/demo-errors",{templateUrl:"views/demo-errors.html",controller:"DemoErrorsCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/demo-errors"})}])}).call(this),function(){"use strict";var a;a=function(a,b,c,d){return{restrict:"E",scope:{actual:"=",expected:"=",label:"<",radius:"<"},link:function(b,e,f){var g,h,i,j,k,l,m,n,o,p;return p=function(a,e){var f,g;if(f=b[a],g=c.isValidFloat(f),b[a]=g?b[a]:c.defaultInput(b[a]),!g)return d.inputTypeError(a,f,b[a],e)},["actual","expected"].forEach(function(a){return p(a,!0)}),n=d3.select(e[0]).append("svg").attr("class","progress-arc").attr("width",2*b.radius||200).attr("height",2*b.radius||200),l=n.append("g").attr("transform","translate(100, 100)"),i=a.arcData(b.radius),h=l.append("path").datum(i[0]).attr("d",function(b){return a.endState(b)}),g=l.append("path").datum(i[1]),j=l.append("path").datum(i[2]),l.selectAll("path").attr("class",function(a){return a.type+"-"+a.name}).style("fill",function(a){return a.fill}),k=n.append("text").data(a.displayData(b.actual)).attr("transform","translate(100, 100)").attr("class","value").text(function(a){return"0"}),n.append("text").attr("transform","translate(100, 100)").attr("class","label").attr("y",function(a){return 20}).text(function(a){return b.label||"Progress"}),n.append("text").attr("transform","translate(100, 100)").attr("class","format").attr("x",33).text(function(a){return"%"}),m=function(){return l.selectAll("*").interrupt(),a.updateArc(g,b.actual,b.expected),a.updateArc(j,b.expected),a.updateText(k,c.floatToPercent(b.actual))},o=function(a){return p(a),m()},b.$watch("actual",function(){return o("actual")}),b.$watch("expected",function(){return o("expected")})}}},a.$inject=["Arc","Color","Conversion","Errors"],angular.module("progressArcApp").directive("progressArc",a)}.call(this),function(){"use strict";var a;a=function(){var a,b;return b={red:"rgb(255, 0, 0)",orange:"rgb(255, 140, 0)",green:"rgb(120, 192, 0)",lightGreen:"rgba(120, 192, 0, 0.5)",lightGray:"rgb(244, 244, 244)"},a=function(a,c){var d;return d=c-a,d>=.5?b.red:d>=.25?b.orange:b.green},{getMoodColor:a,defaultColor:b.green,primary:b.green,secondary:b.lightGreen,base:b.lightGray}},angular.module("progressArcApp").factory("Color",a)}.call(this),function(){"use strict";var a;a=function(){var a,b,c,d;return c=function(a){return 360*a*Math.PI/180},b=function(a){return Math.round(100*a)},d=function(a){return a>=0&&a<=1},a=function(a){return Number(a)&&a>1?1:0},{floatToRadians:c,floatToPercent:b,isValidFloat:d,defaultInput:a}},angular.module("progressArcApp").factory("Conversion",a)}.call(this),function(){"use strict";var a;a=function(a,b){var c,d,e,f,g,h,i,j,k;return c=function(b){return null==b&&(b=100),[{name:"base",type:"path",fill:a.base,innerRadius:0,outerRadius:.65*b,cornerRadius:2*Math.PI,startAngle:0,endAngle:2*Math.PI},{name:"actual",type:"path",fill:a.primary,innerRadius:.8*b,outerRadius:.95*b,cornerRadius:2*Math.PI,startAngle:0,endAngle:0,displayValue:0,hasTransition:!0,hasColorTransition:!0},{name:"expected",type:"path",fill:a.secondary,innerRadius:.7*b,outerRadius:.75*b,cornerRadius:2*Math.PI,startAngle:0,endAngle:0,hasTransition:!0}]},e=function(a){return[{type:"number",value:b.floatToPercent(a)}]},g=d3.arc().innerRadius(function(a){return a.innerRadius}).outerRadius(function(a){return a.outerRadius}).startAngle(function(a){return 0}).endAngle(function(a){return 0}).cornerRadius(function(a){return a.cornerRadius}),f=d3.arc().innerRadius(function(a){return a.innerRadius}).outerRadius(function(a){return a.outerRadius}).startAngle(function(a){return a.startAngle}).endAngle(function(a){return a.endAngle}).cornerRadius(function(a){return a.cornerRadius}),d=function(a,b){var c;return c=d3.interpolate(a.endAngle,b),function(b){return a.endAngle=c(b),f(a)}},h=function(a,b){var c;return c=d3.interpolate(Number(a.textContent),b),function(b){return a.textContent=Math.round(c(b))}},j=function(c,d,e){return c.transition().delay(100).duration(1e3).attrTween("d",function(a){return i[a.type](a,b.floatToRadians(d))}).style("fill",function(b){return b.hasColorTransition?a.getMoodColor(d,e):b.fill})},k=function(a,b){return a.transition().delay(100).duration(1e3).tween("text",function(a){return i[a.type](this,b)})},i={path:d,number:h},{arcData:c,displayData:e,initialState:g,endState:f,tween:i,updateArc:j,updateText:k}},a.$inject=["Color","Conversion"],angular.module("progressArcApp").factory("Arc",a)}.call(this),function(){"use strict";var a;a=function(){var a;return a=function(a,b,c,d){var e;if(e='Saw "'+a+'" input value: "'+b+'". "'+a+'" input should be a number between 0 and 1.0. Input has been defaulted to '+c+". Please try again.",d)return console.log(e);throw Error(e)},{inputTypeError:a}},angular.module("progressArcApp").factory("Errors",a)}.call(this),function(){"use strict";var a;a=function(){var a;a=this,a.data=[{actual:.9,expected:.7,radius:100},{actual:.52,expected:.78,radius:100},{actual:.13,expected:.65,radius:100}]},angular.module("progressArcApp").controller("DemoCtrl",a)}.call(this),function(){"use strict";var a;a=function(){var a;a=this,a.data=[{actual:.9,expected:.7,radius:100},{actual:.52,expected:.78,radius:100},{actual:.13,expected:.65,radius:100}]},angular.module("progressArcApp").controller("DemoInputCtrl",a)}.call(this),function(){"use strict";var a;a=function(){var a;a=this,a.data1={actual:"foo",expected:"bar",radius:100},a.data2={actual:-3,expected:100,radius:100},a.data3={actual:"0.2",expected:"0.5",radius:100},a.data4={actual:"foo",expected:"bar",radius:100}},angular.module("progressArcApp").controller("DemoErrorsCtrl",a)}.call(this),angular.module("progressArcApp").run(["$templateCache",function(a){"use strict";a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/demo-errors.html",'<div style="display:block"><h1>DEMO Errors</h1></div> <p>Oh no! \'foo\', \'bar\', \'baz\' were not valid data. We\'ve broken the widgets... but wait... there\'s still a chance. They will still work if you revive them with valid inputs.</p> <p>Valid numbers are floats from 0 to 1.0. Attempting a number greater will force to 1. Anything less than 0 or other will resort to 0.</p> <p></p> <p>Tips: Open the dev console and witness the helpful error messages that will save you hours in debugging.</p> <p>Note: The inputs are controlled by the progress-arc widget itself. No special handling has been applied to the input fields on the parent controller.</p> <br><br><br><br> <div style="text-align:center"> <progress-arc actual="vm.data1.actual" expected="vm.data1.expected" radius="vm.data1.radius"></progress-arc> <div>1) <u>input type="number"</u> with strings in initial vm.data (i.e. "foo", "bar")</div> <div style="display:block"> <div style="display:inline-block"> Actual: <input type="number" ng-model="vm.data1.actual"> </div> <div style="display:inline-block"> Expected: <input type="number" ng-model="vm.data1.expected"> </div> </div> Reference Data: { actual: \'foo\', expected: \'bar\' } </div> <br><br> <hr> <div style="text-align:center"> <progress-arc actual="vm.data2.actual" expected="vm.data2.expected" radius="vm.data2.radius"></progress-arc> <div>2) <u>input type="number"</u> with out of bounds numbers in initial vm.data (i.e. -3, 100)</div> <div style="display:block"> <div style="display:inline-block"> Actual: <input type="number" ng-model="vm.data2.actual"> </div> <div style="display:inline-block"> Expected: <input type="number" ng-model="vm.data2.expected"> </div> </div> Reference Data: { actual: -3, expected: 100 } </div> <br><br> <hr> <div style="text-align:center"> <progress-arc actual="vm.data3.actual" expected="vm.data3.expected" radius="vm.data3.radius"></progress-arc> <div>3) <u>input type="text"</u> with number strings (i.e. "0.2" and "0.5" opposed to 0.2 and 0.5 respectively)</div> <div style="display:block"> <div style="display:inline-block"> Actual: <input type="text" ng-model="vm.data3.actual"> </div> <div style="display:inline-block"> Expected: <input type="text" ng-model="vm.data3.expected"> </div> </div> Reference Data: { actual: \'0.2\', expected: \'0.5\' } </div> <br><br> <hr> <div style="text-align:center"> <progress-arc actual="vm.data4.actual" expected="vm.data4.expected" radius="vm.data4.radius"></progress-arc> <div>4) <u>input type="text"</u> with string characters (i.e. "foo", "bar")</div> <div style="display:block"> <div style="display:inline-block"> Actual: <input type="text" ng-model="vm.data4.actual"> </div> <div style="display:inline-block"> Expected: <input type="text" ng-model="vm.data4.expected"> </div> </div> Reference Data: { actual: \'foo\', expected: \'bar\' } </div>'),a.put("views/demo-input.html",'<div style="display:block">DEMO:</div> <div>Update the fields with a valid number from 0 to 1.0. Watch the transitions apply!</div> <div style="text-align:center"> <div ng-repeat="data in vm.data" style="display:inline-block;margin:20px"> <progress-arc actual="data.actual" expected="data.expected" radius="data.radius"></progress-arc> <div style="display:block"> <div style="display:block;text-align:left"> Actual: <input type="number" ng-model="data.actual"> </div> <div style="display:block;text-align:left"> Expected: <input type="number" ng-model="data.expected"> </div> </div> </div> </div>'),a.put("views/demo.html",'<div style="display:block">DEMO:</div> <div style="text-align:center"> <div ng-repeat="data in vm.data" style="display:inline-block"> <progress-arc actual="data.actual" expected="data.expected" radius="data.radius"></progress-arc> <div style="display:block"> <span style="display:block">Actual: {{ data.actual }}</span> <span style="display:block">Expected: {{ data.expected }}</span> </div> </div> </div>'),a.put("views/main.html",'<div> <p>We\'re not here to take part. We\'re here to take over!</p> <progress-arc actual="0.88" expected="0.99" label="\'Progress\'"> </progress-arc> </div>'),a.put("views/templates/mytestdirective.html","<div>Description: {{ vm.description }}</div>"),a.put("views/templates/progress-arc.html",'<div class="progress-arc-container"> </div>')}]);