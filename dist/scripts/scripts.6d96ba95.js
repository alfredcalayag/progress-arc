(function(){"use strict";angular.module("progressArcApp",["ngAnimate","ngAria","ngCookies","ngResource","ngRoute","ngSanitize"]).config(["$routeProvider",function(a){return a.when("/demo",{templateUrl:"views/demo.html",controller:"DemoCtrl",controllerAs:"vm"}).when("/demo-input",{templateUrl:"views/demo-input.html",controller:"DemoInputCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/demo-input"})}])}).call(this),function(){"use strict";var a;a=function(a,b,c){return{restrict:"E",scope:{actual:"<",expected:"<",label:"<",radius:"<"},link:function(d,e,f){var g,h,i,j,k,l,m,n,o;if(!c.isValidFloat(d.actual)||!c.isValidFloat(d.expected))throw TypeError("Input should be a number between 0 and 1.0");return m=d3.select(e[0]).append("svg").attr("class","progress-arc").attr("width",2*d.radius||200).attr("height",2*d.radius||200),l=m.append("g").attr("transform","translate(100, 100)"),i=a.arcData(d.radius),h=l.append("path").datum(i[0]),g=l.append("path").datum(i[1]),j=l.append("path").datum(i[2]),l.selectAll("path").attr("class",function(a){return a.type+"-"+a.name}).style("fill",function(a){return a.fill}),k=m.append("text").data(a.displayData(d.actual)).attr("transform","translate(100, 100)").attr("class","value").text(function(a){return"0"}),m.append("text").attr("transform","translate(100, 100)").attr("class","label").attr("y",function(a){return 20}).text(function(a){return d.label||"Progress"}),m.append("text").attr("transform","translate(100, 100)").attr("class","format").attr("x",33).text(function(a){return"%"}),d.$watchGroup(["actual","expected"],function(a,b){if(!c.isValidFloat(d.actual)||!c.isValidFloat(d.expected))throw TypeError("Input should be a number between 0 and 1.0");return l.selectAll("*").interrupt(),n(g,c.floatToRadians(a[0])),n(j,c.floatToRadians(a[1])),o(k,c.floatToPercent(a[0]))}),n=function(c,e){return c.transition().delay(100).duration(1e3).attrTween("d",function(b){return a.tween[b.type](b,e)}).style("fill",function(a){return a.hasColorTransition?b.getMoodColor(d.actual,d.expected):a.fill})},o=function(b,c){return b.transition().delay(100).duration(1e3).tween("text",function(b){return a.tween[b.type](this,c)})}}}},a.$inject=["Arc","Color","Conversion"],angular.module("progressArcApp").directive("progressArc",a)}.call(this),function(){"use strict";var a;a=function(){var a,b;return b={red:"rgb(255, 0, 0)",orange:"rgb(255, 140, 0)",green:"rgb(120, 192, 0)",lightGreen:"rgba(120, 192, 0, 0.5)",lightGray:"rgb(244, 244, 244)"},a=function(a,c){var d;return d=c-a,d>=.5?b.red:d>=.25?b.orange:b.green},{getMoodColor:a,defaultColor:b.green,primary:b.green,secondary:b.lightGreen,base:b.lightGray}},angular.module("progressArcApp").factory("Color",a)}.call(this),function(){"use strict";var a;a=function(){var a,b,c;return b=function(a){return 360*a*Math.PI/180},a=function(a){return Math.round(100*a)},c=function(a){return a>=0&&a<=1},{floatToRadians:b,floatToPercent:a,isValidFloat:c}},angular.module("progressArcApp").factory("Conversion",a)}.call(this),function(){"use strict";var a;a=function(a,b){var c,d,e,f,g,h,i;return c=function(b){return null==b&&(b=100),[{name:"base",type:"path",fill:a.base,innerRadius:0,outerRadius:.65*b,cornerRadius:2*Math.PI,startAngle:0,endAngle:2*Math.PI},{name:"actual",type:"path",fill:a.primary,innerRadius:.8*b,outerRadius:.95*b,cornerRadius:2*Math.PI,startAngle:0,endAngle:0,displayValue:0,hasTransition:!0,hasColorTransition:!0},{name:"expected",type:"path",fill:a.secondary,innerRadius:.7*b,outerRadius:.75*b,cornerRadius:2*Math.PI,startAngle:0,endAngle:0,hasTransition:!0}]},e=function(a){return[{type:"number",value:b.floatToPercent(a)}]},g=d3.arc().innerRadius(function(a){return a.innerRadius}).outerRadius(function(a){return a.outerRadius}).startAngle(function(a){return 0}).endAngle(function(a){return 0}).cornerRadius(function(a){return a.cornerRadius}),f=d3.arc().innerRadius(function(a){return a.innerRadius}).outerRadius(function(a){return a.outerRadius}).startAngle(function(a){return a.startAngle}).endAngle(function(a){return a.endAngle}).cornerRadius(function(a){return a.cornerRadius}),d=function(a,b){var c;return c=d3.interpolate(a.endAngle,b),function(b){return a.endAngle=c(b),f(a)}},h=function(a,b){var c;return c=d3.interpolate(Number(a.textContent),b),function(b){return a.textContent=Math.round(c(b))}},i={path:d,number:h},{arcData:c,displayData:e,initialState:g,endState:f,tween:i}},a.$inject=["Color","Conversion"],angular.module("progressArcApp").factory("Arc",a)}.call(this),function(){"use strict";var a;a=function(){var a;a=this,a.data=[{actual:.9,expected:.7,radius:100},{actual:.52,expected:.78,radius:100},{actual:.13,expected:.65,radius:100}]},angular.module("progressArcApp").controller("DemoCtrl",a)}.call(this),function(){"use strict";var a;a=function(){var a;a=this,a.data=[{actual:.9,expected:.7,radius:100},{actual:.52,expected:.78,radius:100},{actual:.13,expected:.65,radius:100}]},angular.module("progressArcApp").controller("DemoInputCtrl",a)}.call(this),angular.module("progressArcApp").run(["$templateCache",function(a){"use strict";a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/demo-input.html",'<div style="display:block">DEMO:</div> <div>Update the fields with a valid number from 0 to 1.0. Watch the transitions apply!</div> <div style="text-align:center"> <div ng-repeat="data in vm.data" style="display:inline-block;margin:20px"> <progress-arc actual="data.actual" expected="data.expected" radius="data.radius"></progress-arc> <div style="display:block"> <div style="display:block;text-align:left"> Actual: <input type="number" ng-model="data.actual"> </div> <div style="display:block;text-align:left"> Expected: <input type="number" ng-model="data.expected"> </div> </div> </div> </div>'),a.put("views/demo.html",'<div style="display:block">DEMO:</div> <div style="text-align:center"> <div ng-repeat="data in vm.data" style="display:inline-block"> <progress-arc actual="data.actual" expected="data.expected" radius="data.radius"></progress-arc> <div style="display:block"> <span style="display:block">Actual: {{ data.actual }}</span> <span style="display:block">Expected: {{ data.expected }}</span> </div> </div> </div>'),a.put("views/main.html",'<div> <p>We\'re not here to take part. We\'re here to take over!</p> <progress-arc actual="0.88" expected="0.99" label="\'Progress\'"> </progress-arc> </div>'),a.put("views/templates/mytestdirective.html","<div>Description: {{ vm.description }}</div>"),a.put("views/templates/progress-arc.html",'<div class="progress-arc-container"> </div>')}]);